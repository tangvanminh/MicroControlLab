/*
 * fsm_adjust.c
 *
 *  Created on: Oct 14, 2022
 *      Author: MINH
 */
#include "fsm_adjust.h"

void fsm_adjust_run(){
	switch (status){
	case ADJUST_RED:
		//todo
		led7segBuffer[0] = 0;
		led7segBuffer[1] = 2;
		led7segBuffer[2] = increasing_num/10;
		led7segBuffer[3] = increasing_num%10;

		if(timer1_flag==1){
			setTimer1_ms(250);
			HAL_GPIO_TogglePin(GPIOA, LED_RED1_Pin);
			HAL_GPIO_TogglePin(GPIOA, LED_RED2_Pin);
		}

		if(button0_flag == 1){
			button0_flag = 0;
			increasing_num = 1;
			status = ADJUST_GREEN;
		}
		break;
	case ADJUST_GREEN:
		//todo
		if(button0_flag == 1){
			button0_flag = 0;
			status = ADJUST_YELLOW;
		}
		break;
	case ADJUST_YELLOW:
		//todo
		if(button0_flag == 1){
			button0_flag = 0;
			status = RUNNING_RED;
			setTimer0_ms(red_count*1000);
		}
		break;
	default:
		break;
	}
}

